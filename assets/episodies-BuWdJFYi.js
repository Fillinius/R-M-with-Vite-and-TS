import{v as u,l as s,L as x,r as l}from"./index-CJqCdIJk.js";import{u as N}from"./useSearchData-DaCt2Id1.js";const f=({data:r,lastNodeRef:i})=>{const{pathname:c}=u();return s.jsx("div",{className:"card",children:s.jsx("ul",{className:"card-list",children:r.map((e,a)=>r.length===a+1?s.jsx("li",{ref:i,className:"card-list--location",children:s.jsxs(x,{to:c+"/"+e.id,className:"card-link",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Air_data - ",e.air_date]}),s.jsxs("p",{className:"card-text",children:["Episode - ",e.episode]})]})},e.id):s.jsx("li",{className:"card-list--location",children:s.jsxs(x,{to:c+"/"+e.id,className:"card-link",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Air_data - ",e.air_date]}),s.jsxs("p",{className:"card-text",children:["Episode - ",e.episode]})]})},e.id))})})},v=()=>{const{pathname:r}=u(),i=r,[c,e]=l.useState(1),{data:a,isLoading:n,error:d,hasMore:o}=N(c,i),t=l.useRef(null),p=l.useCallback(h=>{n||(t.current&&t.current.disconnect(),t.current=new IntersectionObserver(j=>{j[0].isIntersecting&&o&&(e(m=>m+1),console.log("visible"))}),h&&t.current.observe(h))},[n,o]);return s.jsxs(s.Fragment,{children:[d&&s.jsx("p",{children:" Ошибка получения данных"}),n&&s.jsx("h1",{children:"Загрузка данных"}),a&&!n&&!d&&(a.length===0?"Список пуст":s.jsx(f,{data:a,lastNodeRef:p}))]})};export{v as default};
