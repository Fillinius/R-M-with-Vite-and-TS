import{v as u,l as s,L as h,r as i}from"./index-DD1rppl5.js";import{u as N}from"./useSearchData-LraWNOwq.js";const f=({data:r,lastNodeRef:l})=>{const{pathname:c}=u();return s.jsx("div",{className:"card",children:s.jsx("ul",{className:"card-list ",children:r.map((e,a)=>r.length===a+1?s.jsx("li",{className:"card-list--location",ref:l,children:s.jsxs(h,{to:c+"/"+e.id,className:"card-link ",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Dimension - ",e.dimension]}),s.jsxs("p",{className:"card-text",children:["Type - ",e.type]}),s.jsxs("p",{className:"card-text",children:["Status - ",e.status]})]})},e.id):s.jsx("li",{className:"card-list--location",children:s.jsxs(h,{to:c+"/"+e.id,className:"card-link ",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Dimension - ",e.dimension]}),s.jsxs("p",{className:"card-text",children:["Type - ",e.type]}),s.jsxs("p",{className:"card-text",children:["Status - ",e.status]})]})},e.id))})})},v=()=>{const{pathname:r}=u(),l=r,[c,e]=i.useState(1),{data:a,isLoading:n,error:o,hasMore:d}=N(c,l),t=i.useRef(null),m=i.useCallback(x=>{n||(t.current&&t.current.disconnect(),t.current=new IntersectionObserver(p=>{p[0].isIntersecting&&d&&(e(j=>j+1),console.log("visible"))}),x&&t.current.observe(x))},[n,d]);return s.jsxs(s.Fragment,{children:[o&&s.jsx("p",{children:" Ошибка получения данных"}),n&&s.jsx("h1",{children:"Загрузка данных"}),a&&!n&&!o&&(a.length===0?"Список пуст":s.jsx(f,{data:a,lastNodeRef:m}))]})};export{v as default};
