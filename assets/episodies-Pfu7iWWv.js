import{r as t,v as u,l as s,L as p}from"./index-BXB1XX7j.js";import{u as f}from"./useSearchData-DIgy_sEo.js";const g=t.memo(({data:r,lastNodeRef:i})=>{const{pathname:c}=u();return s.jsx("div",{className:"card",children:s.jsx("ul",{className:"card-list",children:r.map((e,a)=>r.length===a+1?s.jsx("li",{ref:i,className:"card-list--location",children:s.jsxs(p,{to:c+"/"+e.id,className:"card-link",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Air_data - ",e.air_date]}),s.jsxs("p",{className:"card-text",children:["Episode - ",e.episode]})]})},e.id):s.jsx("li",{className:"card-list--location",children:s.jsxs(p,{to:c+"/"+e.id,className:"card-link",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Air_data - ",e.air_date]}),s.jsxs("p",{className:"card-text",children:["Episode - ",e.episode]})]})},e.id))})})}),E=()=>{const{pathname:r}=u(),i=r,[c,e]=t.useState(1),{data:a,isLoading:n,error:o,hasMore:l}=f(c,i),d=t.useRef(null),m=t.useCallback(h=>{var x;n||((x=d.current)==null||x.disconnect(),h&&l&&(d.current=new IntersectionObserver(j=>{j[0].isIntersecting&&l&&(e(N=>N+1),console.log("visible"))}),d.current.observe(h)))},[n,l]);return s.jsxs(s.Fragment,{children:[o&&s.jsx("p",{children:" Ошибка получения данных"}),n&&s.jsx("h1",{children:"Загрузка данных"}),a&&!n&&!o&&(a.length===0?"Список пуст":s.jsx(g,{data:a,lastNodeRef:m}))]})};export{E as default};
