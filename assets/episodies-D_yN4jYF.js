import{v as u,l as s,L as p,r as d}from"./index-8UmbZKLa.js";import{u as f}from"./useSearchData-hM_oOYw0.js";const g=({data:r,lastNodeRef:t})=>{const{pathname:c}=u();return s.jsx("div",{className:"card",children:s.jsx("ul",{className:"card-list",children:r.map((e,a)=>r.length===a+1?s.jsx("li",{ref:t,className:"card-list--location",children:s.jsxs(p,{to:c+"/"+e.id,className:"card-link",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Air_data - ",e.air_date]}),s.jsxs("p",{className:"card-text",children:["Episode - ",e.episode]})]})},e.id):s.jsx("li",{className:"card-list--location",children:s.jsxs(p,{to:c+"/"+e.id,className:"card-link",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"card-text",children:["Air_data - ",e.air_date]}),s.jsxs("p",{className:"card-text",children:["Episode - ",e.episode]})]})},e.id))})})},E=()=>{const{pathname:r}=u(),t=r,[c,e]=d.useState(1),{data:a,isLoading:n,error:o,hasMore:i}=f(c,t),l=d.useRef(null),j=d.useCallback(h=>{var x;n||((x=l.current)==null||x.disconnect(),h&&i&&(l.current=new IntersectionObserver(m=>{m[0].isIntersecting&&i&&(e(N=>N+1),console.log("visible"))}),l.current.observe(h)))},[n,i]);return s.jsxs(s.Fragment,{children:[o&&s.jsx("p",{children:" Ошибка получения данных"}),n&&s.jsx("h1",{children:"Загрузка данных"}),a&&!n&&!o&&(a.length===0?"Список пуст":s.jsx(g,{data:a,lastNodeRef:j}))]})};export{E as default};
